# 更新日志

## [Unreleased]

## [7.1.9] - 2024-10-1

### 新增

- 【编辑名单】功能支持给粉丝勋章排序

### 修复

- 移除元素面板中的小黄车改名为小橙车
- 尝试修复跨天导致的任务执行状态错误的bug

### 删除

- 移除【移除礼物星球】（礼物星球已经没了）

### 调整

- 【移除大乱斗入口】和【移除活动入口】模块合并到【移除直播画面上方杂项】
- 优化【领取年度大会员权益】的日志输出
- 💻 模块的运行条件（isEnabled）由 useModuleStore 统一管理，无需在 run 方法开头处判断

## [7.1.8] - 2024-8-28

### 新增

- 新页面和菜单项【设置】，可在此页面对控制面板宽度进行调整（日后会加入更多功能）
- 适配B站实验室中的“屏幕适配”功能，确保开启时控制面板大小、位置依旧正确
- 💻 支持wbi签名

### 修复

- 修正脚本内置说明中描述不准确的部分
- 修复发送弹幕点亮勋章时无法正确识别因弹幕包含屏蔽词而失败的情况
- 尝试修复会员专属等级加速包无法完成领取条件（看一个视频）的bug
- 控制面板滚动条优化
- 修复【移除元素】面板中帮助信息按钮点击后无效的问题

### 删除

- 移除【显示高能用户数量】（B站已有该功能）

### 调整

- 更新部分API，尽可能符合官方标准
- 💻 配置prettier，editorconfig，gitattributes，解决换行符不一致导致的版本管理问题

## [7.1.7] - 2024-8-7

### 新增

- 点亮熄灭粉丝勋章功能（支持点赞、发送弹幕两种方式）
- 适配最新的观看直播任务

### 修复

- 修复合并配置项时部分用户配置被默认配置覆盖的bug

## [7.1.6] - 2024-7-23

### 新增

- 新版粉丝勋章亲密度机制适配（点赞，发送弹幕）

### 修复

- 修复【编辑名单】弹窗在部分情况下无法正常打开的bug

## [7.1.5] - 2024-7-14

### 新增

- 【发送弹幕】新增【包含等级≥20的粉丝勋章】选项
- 【领取年度大会员权益】支持领取专属等级加速包（10主站经验）

### 修复

- 修复因为在超时时间内找不到播放器上面的header导致【隐藏/显示控制面板】按钮无法显示的问题

### 调整

- 优化【编辑粉丝勋章名单】表格的勾选体验，点击时自动勾选当前行
- 【领取年度大会员权益】部分逻辑和日志输出优化

### 删除

- 删除了【发弹幕自动佩戴粉丝勋章】功能（官方已在展示设置中实现该功能）

## [7.1.4] - 2024-5-3

### 新增

- 移除直播画面上方的排行榜、礼物星球、活动入口、大乱斗入口、礼物栏下方广告、推荐直播间、马赛克

### 修复

- 修复部分情况下点击【编辑名单】按钮时表格中的多选框无法被正确勾选的Bug
- 修复粉丝勋章名单表格无法正确加载的bug
- 修复自动佩戴粉丝勋章、显示高能用户数量模块在第二个及以后的页面无法正确运行的Bug

### 调整

- 移除直播间幻星派对标志模块回归
- 💻 Vue的VSCode官方拓展发生变化，修改相关文档和拓展推荐
- 暂时不领取type=14的大会员权益

## [7.1.3] - 2024-2-2

### 新增

- 体验优化板块：新增隐身入场、发弹幕自动佩戴粉丝勋章、显示高能用户数量功能
- 移除元素板块：新增移除连麦状态提示、移除直播间相同弹幕连续提示功能

### 修复

- 修复领取大会员权益时有可能因为领取过快而失败的问题

### 删除

- 删去了移除直播间幻星派对标志、APP用户任务模块
- 删去了给主播点赞功能的选项“包含等级≥20的粉丝勋章”

### 调整

- 重新使用来自cdn的ajax-hook

## [7.1.2] - 2023-9-17

### 新增

- 💻 模块运行frame新增选项top

### 修复

- 修复部分模块在特殊直播间不运行的Bug
- 修复领取大会员权益模块在领取前一天会多次运行的Bug
- 修复体验优化和移除元素板块不显示标题的Bug

### 调整

- 直播任务板块UI微调
- 粉丝勋章获取逻辑调整，现在可以获取完整的粉丝勋章列表（但可能会耗费很长时间）
- 粉丝勋章相关任务调整，将执行任务的粉丝勋章数量上调为199

## [7.1.1] - 2023-9-5

### 新增

- 屏蔽挂机检测模块
- 💻 更多模块运行时机
- 💻 支持指定模块运行的frame，以及是否在默认模块运行完后运行

### 调整

- 部分模块微调：运行时机，运行frame，是否在默认模块运行完后运行
- 对体验优化板块中的所有模块进行了优化
- 由于ajax-hook存在一个对脚本影响较大的bug，暂时从cdn改为本地修改后的

### 修复

- 继续尝试修复部分情况下脚本被注入得太早导致完全失效的Bug

## [7.1.0] - 2023-8-30

### 新增

- 移除元素板块，内含多个移除页面元素的功能
- 💻 模块运行时机概念，解决部分模块运行地太早导致的一些问题

### 调整

- 优化拦截日志数据上报和禁用P2P功能
- 将`@include`改为`@match`

### 修复

- 修复部分情况下脚本被注入得太早导致完全失效的Bug

## [7.0.9] - 2023-8-25

### 调整

- 💻 调整了Vue App注入时机和相关逻辑

### 修复

- 适配B站更新，修复点赞功能

## [7.0.8] - 2023-8-19

### 新增

- 拦截日志数据上报功能
- 移除大乱斗元素功能
- 移除直播间水印功能

## [7.0.7] - 2023-8-11

### 新增

- 领取年度大会员权益功能

## [7.0.6] - 2023-8-6

### 新增

- 点赞直播间功能新选项：包含等级≥20的粉丝勋章

## [7.0.5] - 2023-8-5

### 新增

- 禁用P2P。
- 💻 新的工作流，自动编译master分支的脚本。

### 调整

- 移除了自动切换画质的一秒延时。

## [7.0.4] - 2023-8-4

### 新增

- 体验优化板块，自动切换画质功能。
- 💻 `Main BLTH`概念和模块`runMultiple`属性

## [7.0.3] - 2023-7-31

### 调整

- 粉丝勋章相关任务不再过滤账号已注销用户。
- 脚本运行时机（`@run-at`）延后至`document-end`。

## [7.0.2] - 2023-7-29

### 新增

- 粉丝勋章相关任务现在可以通过黑名单/白名单的方式精准指定要执行任务的粉丝勋章。

### 删除

- 暂时禁用了APP用户任务。

## [7.0.1] - 2023-7-27

### 修复

- 解决打开多个直播间页面时脚本会重复运行的问题

## [7.0.0] - 2023-7-26

**重大变化**

新的开始。由于脚本名称发生了变化，用户脚本管理器不会用新脚本去覆盖旧脚本。老用户请不要同时运行新脚本和旧脚本。

### 新增

- 每日任务
  - 主站任务
    - 每日登录
    - 每日观看视频
    - 每日投币
    - 每日分享视频
  - 直播任务
    - 直播签到
    - 给主播点赞
    - 发送弹幕
    - 观看直播
    - APP用户任务
  - 其它任务
    - 应援团签到
    - 银瓜子换硬币
    - 硬币换银瓜子
